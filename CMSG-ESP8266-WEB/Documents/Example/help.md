# ESP8266 網頁規格文件

[參考設定步驟請點我](#參考設定步驟)

## 設定指令

|      說明       |               指令               |
| :-------------: | :------------------------------: |
|     AP 設定     |         set [SSID]:[PWD]         |
|    日期設定     |    set time 2021-01-01T00:00     |
|    外網搜尋     |             AP scan              |
|    外網連線     |     AP connect [SSID]:[PWD]      |
|  訊息位址設定   | set recv IP xxx.xxx.xxx.xxx:port |
|  裝置名稱設定   |       set device name NAME       |
| Line Token 設定 |    set Line Token [1]:[TOKEN]    |
|  Line 通知測試  |           Line<MESSAGE           |
|  清除顯示訊息   |            clear msg             |

## 參數資訊

- ESP8266 資訊

|          參數          |          描述           |
| :--------------------: | :---------------------: |
|          SSID          |    ESP8266 WIFI 名稱    |
|        連接網路        |    已連上 WIFI 名稱     |
|        訊號品質        | 與 ESP8266 間的連線品質 |
|          時間          |   日期+24 小時制時間    |
|      訊息接收位址      | 接收資料 Server IP 位址 |
|       Line Token       |     已存 Token 組數     |
| Telegram Token(未實作) |     已存 Token 組數     |

- 功能設定(以呼吸器為例)

|  參數  |  單位   |  TYPE  | 備註  |
| :----: | :-----: | :----: | :---: |
|  性別  |    -    | STRING | 男/女 |
|  年齡  |   歲    |  INT   | 1-100 |
|  體重  |  公斤   | FLOAT  | 1-200 |
| 肺活量 |  公升   | FLOAT  | 1-10  |
|  週期  |  次/分  |  INT   | 1-10  |
| 打氣量 | 公升/次 | FLOAT  |  1-5  |

- 顯示資訊(以呼吸器為例)

|      參數      |            描述             |
| :------------: | :-------------------------: |
| 啟動/結束 時間 | 裝置啟動/結束時間,24 小時制 |
|    運行狀態    |      執行、暫停、停止       |
|    剩餘週期    |      剩餘打氣週期次數       |

## 資料傳輸格式

- JSON

## 裝置功能

- ESP8266 端

|    功能    |                      描述                       |
| :--------: | :---------------------------------------------: |
| 功能頁切換 |        操作畫面/參數(狀態)/指令頁面切換         |
|  指令執行  |              發送指令進行設定/控制              |
|  顯示記錄  | 在畫面上顯示指令使用/裝置運行記錄(以時間為單位) |
|  清除記錄  |                 將所有記錄清除                  |

- 裝置端(以呼吸器為例)

| 功能 |         描述         |
| :--: | :------------------: |
| 啟動 | 依據設定參數啟動裝置 |
| 停止 |   完全停止裝置動作   |
| 重設 |    將設定參數清除    |

## 參考設定步驟

- #### 外網連線設定(指令版)

  1. 點選 **功能頁切換** -> **指令**
  2. 在指令列輸入 **AP scan** 查看可用 WIFI
  3. 輸入 **AP connect [WIFI 名稱]:[密碼]**
  4. 待 **連接網路** 顯示連上的 WIFI 名稱便完成

- #### 外網連線設定(簡易操作版)

  1. 點選 **連接網路** 開啟 WIFI 列表
  2. 選擇畫面顯示的 WIFI
  3. 輸入密碼(若無則不會顯示密碼視窗)
  4. 待 **連接網路** 顯示連上的 WIFI 名稱便完成

- #### 裝置 AP 設定(指令版)

  1. 點選 **功能頁切換** -> **指令**
  2. 在指令列輸入 **set [新名稱]:[新密碼]**
  3. 關閉 WIFI 後重新開啟
  4. 待手機 WIFI 清單顯示重設的 WIFI 名稱便完成

- #### 裝置 AP 設定(簡易操作版)

  1. 點選 **SSID** 開啟設定視窗
  2. 輸入新名稱及新密碼後確認
  3. 關閉 WIFI 後重新開啟
  4. 待手機 WIFI 清單顯示重設的 WIFI 名稱便完成

- #### Line Token 設定

  1. 點選 **功能頁切換** -> **指令**
  2. 在指令列輸入<br>**set Line Token [1]:[TOKEN]**
  3. 待通知跳出**Line Token 設定成功**便完成
  4. 可在 **Line Token**資訊欄中查看已設定組數

- #### 訊息接收位址設定

  1. 點選 **功能頁切換** -> **指令**
  2. 在指令列輸入(xxx 爲目標位址)<br>**set recv IP xxx.xxx.xxx.xxx:port**
  3. 待通知跳出**訊息接收位址 設定成功**便完成
  4. 可在**訊息接收位址**資訊欄中查看設定參數

## 版本資訊

### 版號定義 vX.Y

### X : 模組更新、代碼重構

### Y : Bug 修正、參數修正、介面調整、功能新增

- ### v1.0
